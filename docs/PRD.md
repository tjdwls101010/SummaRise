# **제품 요구사항 명세서(PRD): 개인용 콘텐츠 요약 및 라이브러리**

  - **문서 버전**: 1.0
  - **작성일**: 2025년 7월 16일
  - **작성자**: Gemini (AI Assistant)
  - **프로젝트명**: Personal Content Summarizer & Library

## **1. 상세 Product Description**

본 프로젝트는 정보 과부하 시대에 사용자가 웹상의 긴 글이나 영상을 효율적으로 소비하고 지식을 체계적으로 관리할 수 있도록 돕는 **개인 맞춤형 콘텐츠 요약 및 아카이빙 웹 서비스**입니다.

사용자가 YouTube 영상 링크나 일반 웹 아티클 링크를 입력하면, 서비스는 자동으로 콘텐츠의 핵심(자막 또는 본문)을 추출하고, 지정된 LLM(기본: Gemini)을 통해 핵심 내용만 요약하여 제공합니다. 모든 요약 결과는 메타데이터와 함께 데이터베이스에 영구 저장되며, 사용자는 Notion과 유사한 UI를 통해 언제든지 요약본을 찾아보고 관리할 수 있습니다.

### **해결하고자 하는 문제 (Pain Points)**

  - 긴 분량의 YouTube 영상과 아티클을 처음부터 끝까지 보거나 읽는 데 소요되는 과도한 시간
  - 기존 노트 앱에는 웹페이지의 서식을 유지하며 Markdown으로 변환하거나, 동영상 자막을 자동으로 추출하는 기능 부재
  - 개인 사용자라도 신뢰할 수 있는 데이터 저장, 빠른 검색, 깔끔한 UI/UX에 대한 필요성
  - LLM API 키의 호출 제한(Rate Limit)이나 일시적 오류 발생 시 작업 흐름이 중단되는 문제

### **핵심 목표 및 성공 지표 (Goals & KPI)**

  - **T1 (요약 성공률)**: 자막/본문 추출이 가능한 입력에 대해 **95% 이상**의 요약 성공률 달성
  - **T2 (요약 소요 시간)**: 사용자가 링크 입력 후 요약문을 받기까지 걸리는 시간을 **P95 기준 30초 이내**로 유지
      - *Note: P95는 100개의 요청 중 95개는 30초 내에 처리됨을 의미하며, 이는 LLM API의 응답 시간 변동성을 고려한 현실적인 목표입니다.*
  - **T3 (검색 정확도)**: 검색 시 상위 5개 결과 내에 원하는 항목이 포함될 확률 **90% 이상** 달성
  - **T4 (데이터 무손실)**: 서비스 배포 및 업데이트 과정에서 데이터 손실 **0%** 달성 (Supabase 자동 백업 활성화)

-----

## **2. 참고 서비스 및 선정 이유**

| 서비스명 | 참고 부분 | 선정 이유 |
| :--- | :--- | :--- |
| **Notion** | 갤러리/리스트 뷰, 상세 페이지 UI/UX | - **직관적인 정보 구조**: 카드 형태의 갤러리 뷰와 테이블 형태의 리스트 뷰는 요약된 콘텐츠를 한눈에 파악하고 필터링하기에 최적화된 인터페이스를 제공합니다.\<br\>- **몰입감 있는 상세 페이지**: 클릭 시 열리는 상세 페이지는 본문(Markdown 렌더링)에 집중하면서도, 관련 메타데이터(출처, 태그 등)와 액션 버튼(재요약, 수정)을 사이드바나 상단에 깔끔하게 배치하는 패턴을 참고하여 사용자 경험을 극대화할 수 있습니다. |

-----

## **3. 핵심 기능 및 명세**

### **F-01: URL 입력 및 처리**

  - **명세**:
      - 메인 화면에 단일 URL 입력 필드를 제공합니다.
      - 사용자가 URL을 붙여넣으면, 시스템은 `youtube.com` 또는 `youtu.be` 포함 여부를 기준으로 **YouTube 링크**와 **기타 웹 링크**를 자동으로 식별합니다.
      - 유효하지 않은 URL 형식 입력 시, 실시간으로 에러 메시지를 표시합니다.

### **F-02: 원본 콘텐츠 추출 및 변환**

  - **명세**:
      - **YouTube 링크**: `youtube-transcript`와 같은 라이브러리를 사용해 해당 영상의 자막(transcript)을 텍스트로 추출합니다.
          - 자막이 없는 경우, "자막을 찾을 수 없습니다."라는 명확한 메시지를 사용자에게 안내하고 작업을 중단합니다.
      - **기타 웹 링크**: `axios` 등으로 해당 URL의 HTML을 가져온 후, Microsoft의 `MarkItDown` 유틸리티를 사용해 주요 콘텐츠 영역을 Markdown으로 변환합니다.

### **F-03: LLM 요약 기능**

  - **명세**:
      - 추출된 텍스트(자막 또는 Markdown)를 백엔드(Next.js Route Handler)로 전송합니다.
      - **사용자 설정 가능한 시스템 프롬프트**: 사용자는 설정 페이지에서 "이 글을 3줄로 요약해줘"와 같이 LLM에 전달할 기본 시스템 프롬프트를 직접 수정하고 저장할 수 있습니다.
      - **다중 API 키 및 장애 극복(Failover)**:
          - 사용자는 여러 LLM API 키(예: Gemini Key 1, Gemini Key 2, OpenAI Key 1)를 우선순위와 함께 등록할 수 있습니다.
          - 요약 요청 시, 가장 높은 우선순위의 키부터 순차적으로 호출을 시도합니다.
          - 특정 키가 호출 제한, 인증 실패 등의 사유로 에러를 반환하면, 즉시 다음 우선순위의 키로 자동 전환하여 요약을 재시도합니다.

### **F-04: 데이터 저장 (Supabase)**

  - **명세**:
      - 요약이 완료되면, 다음 메타데이터와 함께 Supabase(PostgreSQL) `summaries` 테이블에 저장합니다.
      - **저장 필드**: `id`, `created_at`, `source_url`, `content_type` ('youtube' | 'article'), `title`, `channel_or_site` (채널명 또는 웹사이트 호스트명), `original_content` (원본 텍스트), `summarized_content` (요약된 텍스트), `tags[]` (문자열 배열)
      - *Note: 상세한 데이터베이스 스키마(ERD)는 별도 문서에서 관리합니다.*

### **F-05: 콘텐츠 라이브러리 UI**

  - **명세**:
      - 요약된 모든 콘텐츠를 **갤러리 뷰**와 **리스트 뷰**로 전환하며 볼 수 있는 UI를 제공합니다.
      - **갤러리 뷰**: 각 항목을 카드로 표시하며, 카드에는 대표 이미지(YouTube 썸네일 또는 웹사이트 파비콘), 제목, 태그, 생성 날짜를 표시합니다.
          - *(이미지 컨셉: Notion의 데이터베이스 갤러리 뷰와 유사한 깔끔한 카드 디자인)*
      - **리스트 뷰**: 각 항목을 테이블의 행으로 표시하며, 정렬 및 필터링 기능을 제공합니다.

### **F-06: 상세 페이지 뷰**

  - **명세**:
      - 라이브러리에서 특정 항목을 클릭하면 해당 항목의 상세 페이지로 이동합니다.
      - 페이지 좌측(또는 메인 영역)에는 요약된 콘텐츠(`summarized_content`)가 Markdown 형식으로 렌더링되어 표시됩니다.
      - 페이지 우측(또는 상단 영역)에는 출처 URL, 생성일, 태그 등의 메타데이터와 **"재요약"**, **"수정하기"** 버튼이 위치합니다.

### **F-07: 콘텐츠 검색**

  - **명세**:
      - 헤더에 전역 검색 바를 제공합니다.
      - `title`, `summarized_content`, `channel_or_site`, `tags` 필드를 대상으로 **Full-Text Search**를 지원합니다.
      - *Note: 검색 기능 구현 시 Supabase의 `to_tsvector` 및 `websearch_to_tsquery` 함수를 활용하여 검색 효율성과 정확도를 높입니다.*

### **F-08: 사용자 액션**

  - **명세**:
      - **재요약**: 상세 페이지에서 "재요약" 버튼 클릭 시, 저장된 `original_content`를 기반으로 LLM 요약을 다시 수행하고 `summarized_content`를 덮어씁니다. (이때도 다중 키 Failover 로직 적용)
      - **수정 및 Diff**:
          - "수정하기" 버튼 클릭 시, 요약문이 편집 가능한 `textarea`로 전환됩니다.
          - 사용자가 내용을 수정한 후 저장하면, 시스템은 **가장 마지막으로 저장된 버전**과 **현재 수정된 버전** 간의 차이(diff)를 시각적으로 보여주고 최종 저장을 확인받습니다.

### **F-09: 상태 표시 및 예외 처리**

  - **명세**:
      - URL 입력 후 요약이 진행되는 동안, 사용자에게 명확한 **프로그레스 표시기**(예: 로딩 스피너, "요약 중..." 텍스트)를 보여줍니다.
      - 콘텐츠 추출 실패, LLM API 키 전체 실패 등 예상치 못한 에러 발생 시, 사용자에게 상황을 명확히 알리는 토스트 메시지를 표시합니다.
      - JavaScript로 동적 렌더링되는 페이지의 콘텐츠 추출은 MVP 범위에서 제외하며, 향후 개선 과제로 관리합니다.

-----

## **4. 추가 기능 제안 (Future Scope)**

  - **브라우저 확장 프로그램**: 현재 보고 있는 페이지를 클릭 한 번으로 요약하고 라이브러리에 저장하는 기능
  - **자동 태깅 및 태그 관리**: LLM을 활용해 요약된 콘텐츠에 적합한 태그를 자동으로 추천하고, 사용자가 태그를 편집/삭제/병합할 수 있는 전용 관리 페이지
  - **다양한 콘텐츠 유형 지원**: 로컬 PDF 파일 업로드 후 요약, 오디오 파일(팟캐스트 등) 업로드 후 STT(Speech-to-Text) 변환 및 요약 기능
  - **고급 검색 필터**: 콘텐츠 유형(YouTube/Article), 특정 날짜 구간, 태그 조합 등 다중 조건으로 라이브러리를 필터링하는 기능
  - **동적 콘텐츠 추출 지원**: Puppeteer나 Playwright 같은 헤드리스 브라우저를 백엔드에 통합하여, JavaScript 렌더링이 필요한 SPA(Single Page Application) 웹사이트의 콘텐츠도 안정적으로 추출

-----

## **5. 사용자 페르소나 및 시나리오**

### **페르소나**

  - **이름**: 김민준 (31세, 소프트웨어 엔지니어)
  - **소개**: 새로운 기술 트렌드와 개발 지식을 습득하는 것을 즐기는 '평생 학습자'. 주로 기술 블로그, 해외 컨퍼런스 영상(YouTube), 온라인 아티클을 통해 정보를 얻는다.
  - **목표**: 한정된 시간 안에 최대한 많은 양질의 정보를 습득하고, 나중에 다시 찾아볼 수 있도록 핵심만 정리해두고 싶다.

### **주요 사용 시나리오**

  - **시나리오 1: YouTube 컨퍼런스 영상 요약**

    1.  민준은 Next.js 15의 새로운 기능에 대한 1시간 30분짜리 컨퍼런스 영상을 발견한다.
    2.  영상을 다 볼 시간이 없어, 영상의 URL을 복사하여 '콘텐츠 요약 라이브러리'에 붙여넣는다.
    3.  서비스는 자동으로 영상의 자막을 추출하고, 30초 내에 핵심 기능과 변경점을 요약한 결과를 보여준다.
    4.  민준은 요약본을 읽고 빠르게 핵심을 파악한 뒤, `#NextJS`, `#React19` 태그를 달아 라이브러리에 저장한다.

  - **시나리오 2: 해외 기술 아티클 요약**

    1.  민준은 CSS-in-JS의 대안으로 떠오른 새로운 라이브러리에 대한 긴 분량의 영문 아티클을 발견한다.
    2.  아티클 URL을 복사해 서비스에 입력한다.
    3.  서비스는 광고와 메뉴 등을 제외한 순수 본문만 추출하여 Markdown으로 변환하고, 이를 바탕으로 국문 요약문을 생성한다.
    4.  민준은 기술의 장단점이 명확히 정리된 요약문을 통해 해당 라이브러리의 도입 여부를 빠르게 판단한다.

  - **시나리오 3: 과거 정보 검색 및 개인 노트 추가**

    1.  몇 주 후, 민준은 이전에 요약했던 CSS 라이브러리 관련 내용을 다시 찾아보고 싶다.
    2.  검색창에 "CSS"라고 입력하자, 관련 요약본이 상위 결과로 즉시 나타난다.
    3.  상세 페이지로 들어가 요약문을 다시 읽어본 뒤, "수정하기" 버튼을 눌러 프로젝트에 적용하며 느낀 자신의 생각과 코드 스니펫을 요약문 하단에 추가로 기록하고 저장한다.

-----

## **6. 기술 스택 및 선정 근거**

| 구분 | 기술 | 선정 근거 |
| :--- | :--- | :--- |
| **프론트엔드** | Next.js 15, React 19, TypeScript, Tailwind CSS, shadcn/ui | - **생산성 및 유지보수**: 최신 Next.js App Router와 React 19 기능을 활용하여 서버/클라이언트 컴포넌트를 효율적으로 구성합니다. TypeScript를 통해 코드 안정성을 확보하고, Tailwind와 shadcn/ui로 빠르고 일관된 디자인 시스템을 구축합니다. |
| **상태 관리** | @tanstack/react-query (서버), Zustand (클라이언트) | - **효율적인 데이터 관리**: React Query는 서버 데이터(요약 목록, 상세 정보 등)의 fetching, caching, re-fetching을 자동화하여 API 통신 코드를 단순화하고 UI를 항상 최신으로 유지합니다. Zustand는 간단한 클라이언트 상태(UI 테마, 설정 값 등)를 최소한의 코드로 관리하기에 적합합니다. |
| **백엔드** | Next.js Route Handlers (API), Supabase (PostgreSQL) | - **통합 개발 환경**: 프론트엔드와 동일한 Next.js 환경에서 API를 개발하여 개발 복잡도를 낮춥니다. Supabase는 PostgreSQL 기반의 높은 신뢰성과 확장성을 제공하며, Full-Text Search, 자동 백업 등 프로젝트에 필요한 기능을 즉시 사용할 수 있어 개발 속도를 높입니다. |
| **인증** | 없음 (단일 사용자) | - **단순성**: MVP는 개인용 도구이므로 복잡한 인증/권한 시스템 없이, 환경 변수 등을 통한 암묵적 접근 제어로 충분합니다. |
| **LLM** | Google Gemini API (기본), 사용자 추가 키 지원 | - **유연성 및 확장성**: 고성능 Gemini API를 기본으로 제공하되, 사용자가 직접 다른 LLM API 키를 추가하고 우선순위를 설정할 수 있는 구조를 통해 특정 모델에 대한 종속성을 제거하고 서비스의 유연성을 확보합니다. |
| **보안** | Supabase Vault / 환경 변수 | - **안전한 키 관리**: LLM API 키와 같은 민감 정보는 클라이언트 번들에 포함시키지 않고, Supabase Vault나 서버 환경 변수에 암호화하여 저장함으로써 탈취 위험을 원천 차단합니다. |